<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.com">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<link rel="stylesheet" th:href="@{/css/signin.css}">
	<link rel="icon" type="image/x-icon" href="/images/iicon.png">
	<title>Login in</title>
</head>

<body class="homebody">

	<nav class="navbar">
		<a href="/"><img src="/images/eureka_logo.png" class="image"></a>
		<ul>
			<li><a href="/">Home</a></li>
			<li><a href="#">About</a></li>
			<li><a href="#">Contact Us</a></li>

		</ul>
	</nav>
	<h1 class="container text-center text-white">Reset Password</h1>
	<br>
	<div class="container">
		<th:block th:if="${session.msg1}">
			<p class="text-center fs-4 text-success">[[${session.msg1}]]</p>
			<div th:text="${@serviceHelper.removeMessageFromSession2()}"></div>
		</th:block>
		<form id="changepassword" class="container" action="/reset" method="post">
			<input type="hidden" th:name="id" th:value="${userid}">
			<div class="form-group row d-flex justify-content-center">
				<label class="col-md-2 col-form-label text-white">Enter New Password</label>
				<div class="col-sm-3">
					<input type="password" class="form-control" id="newpassword" placeholder="Enter New Password" th:name="psw">
					<small>Error Message</small>
				</div>
			</div>
			<br>
			<div class="form-group row d-flex justify-content-center">
				<label class="col-md-2 col-form-label text-white">Confirm New Password</label>
				<div class="col-sm-3">
					<input type="password" class="form-control" id="confirmnewpassword" placeholder="Confirm New Password" th:name="cpsw">
					<small>Error Message</small>
				</div>
			</div>
			<br>
			<div class="d-flex justify-content-center">
				<button type="submit" class="btn btn-primary col-md-13-f4">Change Password</button>
			</div>
		</form>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
			crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
			integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
			crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
			integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
			crossorigin="anonymous"></script>
		<script>
		const form = document.getElementById('changepassword'); 
		const password = document.getElementById('newpassword');
		const password2 = document.getElementById('confirmnewpassword');
		// check passwords match

		function checkPasswordsMatch(input1, input2) {
			if (input1.value !== input2.value) {
				showError(input2, 'Passwords do not match');
			}
		}

		// Get fieldname
		function getFieldName(input) {
			return input.id.charAt(0).toUpperCase() + input.id.slice(1);
		}
		console.log("hii");
		// Event listeners
		form.addEventListener('submit', function (e) {
			e.preventDefault();
			checkPasswordsMatch(password, password2);
			const errorMessages = form.querySelectorAll('.error');
			if (errorMessages.length === 0) {
				// If no error messages, submit the form and redirect to another page
				form.submit();
			}
		});
	</script>
</body>

</html>